# Homebrew setup
if [ -x /opt/homebrew/bin/brew ]; then
    eval "$(/opt/homebrew/bin/brew shellenv)"
elif command -v brew >/dev/null 2>&1; then
    eval "$(brew shellenv)"
fi

# Ruby version manager (chruby)
# source /opt/homebrew/opt/chruby/share/chruby/chruby.sh
# source /opt/homebrew/opt/chruby/share/chruby/auto.sh
# chruby ruby-3.4.5

# PATH additions
export PATH="$HOME/Public/Projects/flutter/bin:$PATH"
export PATH="$HOME/.local/bin:$PATH"
export PATH="$HOME/.codeium/windsurf/bin:$PATH"
export PATH="$HOME/.antigravity/antigravity/bin:$PATH"

# Atuin shell history setup
if [ -f "$HOME/.atuin/bin/env" ]; then
    . "$HOME/.atuin/bin/env"
    
    # Shell-specific Atuin initialization
    if [ -n "$BASH_VERSION" ]; then
        # Bash-specific setup
        if [ -f "$HOME/.bash-preexec.sh" ]; then
            # shellcheck disable=SC1090
            source "$HOME/.bash-preexec.sh"
        fi
        if command -v atuin >/dev/null 2>&1; then
            eval "$(atuin init bash)"
        fi
    elif [ -n "$ZSH_VERSION" ]; then
        # Zsh-specific setup
        if command -v atuin >/dev/null 2>&1; then
            eval "$(atuin init zsh)"
        fi
    fi
fi

if command -v mise >/dev/null 2>&1; then
    if [ -n "$ZSH_VERSION" ]; then
        eval "$(mise activate zsh)"
    elif [ -n "$BASH_VERSION" ]; then
        eval "$(mise activate bash)"
    fi
fi